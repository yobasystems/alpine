# You can override the included template(s) by including variable overrides
# SAST customization: https://docs.gitlab.com/ee/user/application_security/sast/#customizing-the-sast-settings
# Secret Detection customization: https://docs.gitlab.com/ee/user/application_security/secret_detection/#customizing-settings
# Dependency Scanning customization: https://docs.gitlab.com/ee/user/application_security/dependency_scanning/#customizing-the-dependency-scanning-settings
# Container Scanning customization: https://docs.gitlab.com/ee/user/application_security/container_scanning/#customizing-the-container-scanning-settings
# Note that environment variables can be set in several places
# See https://docs.gitlab.com/ee/ci/variables/#cicd-variable-precedence
stages:
- build
- test
- manifest
- deploy
include:
- remote: https://gitlab.com/yobasystems/gitlab-ci-templates/raw/master/container_scanning_all_arch.yml
- template: Security/Secret-Detection.gitlab-ci.yml
amd64 latest build:
    image: yobasystems/alpine-docker:dind
    stage: build
    tags:
    - amd64
    variables:
      CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
      CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
    script:
    - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
    - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
    - apk add --update git
    - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
    - cd alpine-3.16.0/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
      --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:x86_64
      -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:x86_64
      -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:x86_64
      -t $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:x86_64
      -t $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:x86_64
      -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:amd64 .
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:x86_64
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:amd64
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:x86_64
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:x86_64
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:amd64
  arm32v7 latest build:
    image: yobasystems/alpine-docker:dind
    stage: build
    tags:
    - armhf
    variables:
      CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
      CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
    script:
    - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
    - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
    - apk add --update git
    - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
    - cd alpine-3.16.0/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
      --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm32v7
      -t $DOCKER_REGISTRY_DOCKERHUB_REPO:arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:arm32v7
      -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:armhf
      -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:armhf .
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm32v7
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:armhf
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:arm32v7
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:armhf
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:arm32v7
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:armhf
  arm64v8 latest build:
    image: yobasystems/alpine-docker:dind
    stage: build
    tags:
    - aarch64
    variables:
      CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
      CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
    script:
    - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
    - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
    - apk add --update git
    - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
    - cd alpine-3.16.0/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
      --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm64v8
      -t $DOCKER_REGISTRY_DOCKERHUB_REPO:arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:arm64v8
      -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:aarch64
      -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:aarch64 .
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm64v8
    - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:aarch64
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:arm64v8
    - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
      && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:aarch64
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:arm64v8
    - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
      && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:aarch64
amd64 3.16.0 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.16.0/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-amd64
arm32v7 3.16.0 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.16.0/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-armhf
arm64v8 3.16.0 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.16.0/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.16.0-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-aarch64
amd64 3.15.4 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.15.4/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-amd64
arm32v7 3.15.4 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.15.4/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-armhf
arm64v8 3.15.4 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.15.4/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15.4-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.15-aarch64
amd64 3.14.6 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.14.6/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-amd64
arm32v7 3.14.6 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.14.6/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-armhf
arm64v8 3.14.6 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.14.6/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14.6-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.14-aarch64
amd64 3.13.10 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.13.10/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-amd64
arm32v7 3.13.10 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.13.10/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-armhf
arm64v8 3.13.10 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.13.10/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13.10-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.13-aarch64
amd64 3.12.12 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.12.12/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-amd64
arm32v7 3.12.12 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.12.12/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-armhf
arm64v8 3.12.12 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.12.12/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12.12-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.12-aarch64
amd64 3.11.13 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - amd64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.11.13/amd64/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-x86_64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-x86_64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-amd64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-amd64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-x86_64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-x86_64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-amd64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-amd64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-x86_64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-x86_64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-amd64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-amd64 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-x86_64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-amd64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-x86_64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-amd64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-x86_64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-amd64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-amd64
arm32v7 3.11.13 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - armhf
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.11.13/arm32v7/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-armhf
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-armhf -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-armhf
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-armhf -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-armhf
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-armhf -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm32v7
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm32v7 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm32v7
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm32v7 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-arm32v7
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-arm32v7 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm32v7
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-armhf
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm32v7
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-armhf
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-arm32v7
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-armhf
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-armhf
arm64v8 3.11.13 build:
  image: yobasystems/alpine-docker:dind
  stage: build
  tags:
  - aarch64
  variables:
    CI_APPLICATION_REPOSITORY: "$CI_REGISTRY_IMAGE/$CI_COMMIT_REF_SLUG"
    CI_APPLICATION_TAG: "$CI_COMMIT_SHA"
  script:
  - export COMMIT_TIME=$(git show -s --format=%ct $CI_APPLICATION_TAG)
  - echo "$COMMIT_TIME" && echo "$CI_COMMIT_SHORT_SHA"
  - apk add --update git
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - cd alpine-3.11.13/arm64v8/ && docker build --build-arg VCS_REF=${CI_COMMIT_SHORT_SHA}
    --build-arg BUILD_DATE=${COMMIT_TIME} -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-aarch64
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-aarch64 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-aarch64
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-aarch64 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-aarch64
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-aarch64 -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm64v8
    -t $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm64v8 -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm64v8
    -t $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm64v8 -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-arm64v8
    -t $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-arm64v8 .
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm64v8
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-aarch64
  - docker push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm64v8
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-aarch64
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
    && docker push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-arm64v8
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11.13-aarch64
  - echo "$QUAY_PASSWORD" | docker login -u "$QUAY_USERNAME" quay.io --password-stdin
    && docker push $DOCKER_REGISTRY_QUAY/$DOCKER_REGISTRY_QUAY_REPO:3.11-aarch64
gitlab manifest creation latest:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:latest $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:latest $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:latest $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:latest $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:latest
dockerhub manifest creation latest:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:latest $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:latest $DOCKER_REGISTRY_DOCKERHUB_REPO:amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:latest $DOCKER_REGISTRY_DOCKERHUB_REPO:arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:latest $DOCKER_REGISTRY_DOCKERHUB_REPO:arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:latest
gitlab manifest creation 3.16:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16
dockerhub manifest creation 3.16:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16
gitlab manifest creation 3.16.0:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.16.0
dockerhub manifest creation 3.16.0:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.16.0
gitlab manifest creation 3.15:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15
dockerhub manifest creation 3.15:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15
gitlab manifest creation 3.15.4:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.15.4
dockerhub manifest creation 3.15.4:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.15.4
gitlab manifest creation 3.14:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14
dockerhub manifest creation 3.14:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14
gitlab manifest creation 3.14.6:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.14.6
dockerhub manifest creation 3.14.6:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.14.6
gitlab manifest creation 3.13:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13
dockerhub manifest creation 3.13:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13
gitlab manifest creation 3.13.10:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.13.10
dockerhub manifest creation 3.13.10:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.13.10
gitlab manifest creation 3.12:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12
dockerhub manifest creation 3.12:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12
gitlab manifest creation 3.12.12:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.12.12
dockerhub manifest creation 3.12.12:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.12.12
gitlab manifest creation 3.11:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11
dockerhub manifest creation 3.11:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11
gitlab manifest creation 3.11.13:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$CI_JOB_TOKEN" | docker login -u gitlab-ci-token "$DOCKER_REGISTRY" --password-stdin
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-amd64
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm32v7
  - docker pull $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm64v8
  - docker manifest create $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-amd64
    $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm32v7 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13 $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY/$DOCKER_REGISTRY_REPO:3.11.13
dockerhub manifest creation 3.11.13:
  image: yobasystems/alpine-docker:dind
  stage: manifest
  tags:
  - manifest
  script:
  - mkdir /root/.docker
  - 'echo -e "{\n    \"experimental\": \"enabled\"\n}\n" >> ~/.docker/config.json'
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-amd64
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm32v7
  - docker pull $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm64v8
  - docker manifest create $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-amd64
    $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm32v7 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm64v8
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-amd64
    --os linux --arch amd64
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm32v7
    --os linux --arch arm
  - docker manifest annotate $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13 $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13-arm64v8
    --os linux --arch arm64
  - docker manifest push $DOCKER_REGISTRY_DOCKERHUB_REPO:3.11.13
